!function(o){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return o(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),o(e,t,t.document)}:o(jQuery,window,document)}(function(s,t,o,e){"use strict";var i=s.fn.dataTable,a=0,d=function(t,e){if(!i.versionCheck||!i.versionCheck("1.10.8"))throw"Warning: altEditor requires DataTables 1.10.8 or greater";this.c=s.extend(!0,{},i.defaults.altEditor,d.defaults,e),this.s={dt:new i.Api(t),namespace:".altEditor"+a++},this.dom={modal:s('<div class="dt-altEditor-handle"/>')},this._constructor()};return s.extend(d.prototype,{_constructor:function(){var t=this,e=this.s.dt;e.settings()[0].oInit.onAddRow&&(t.onAddRow=e.settings()[0].oInit.onAddRow),e.settings()[0].oInit.onDeleteRow&&(t.onDeleteRow=e.settings()[0].oInit.onDeleteRow),e.settings()[0].oInit.onEditRow&&(t.onEditRow=e.settings()[0].oInit.onEditRow),this._setup(),e.on("destroy.altEditor",function(){e.off(".altEditor"),s(e.table().body()).off(t.s.namespace),s(o.body).off(t.s.namespace)})},_setup:function(){var n=this,t=this.s.dt;s("body").append('<div class="modal fade" id="altEditor-modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 style="padding-top: 1rem;padding-left: 1rem;" class="modal-title"></h4><button style="margin: initial;" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><p></p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><input type="submit" form="altEditor-form" class="btn btn-primary"></input></div></div></div></div>'),t.button("edit:name")&&(t.button("edit:name").action(function(t,e,o,a){n._openEditModal()}),s(o).on("click","#editRowBtn",function(t){n._inputValidation()&&(t.preventDefault(),t.stopPropagation(),n._editRowData())})),t.button("delete:name")&&(t.button("delete:name").action(function(t,e,o,a){n._openDeleteModal()}),s(o).on("click","#deleteRowBtn",function(t){t.preventDefault(),t.stopPropagation(),n._deleteRow(),s(this).prop("disabled",!0)})),t.button("add:name")&&(t.button("add:name").action(function(t,e,o,a){n._openAddModal()}),s(o).on("click","#addRowBtn",function(t){n._inputValidation()&&(t.preventDefault(),t.stopPropagation(),n._addRowData())})),this.s.dt.button("refresh:name")&&this.s.dt.button("refresh:name").action(function(t,e,o,a){e.ajax&&e.ajax.url()&&e.ajax.reload()})},_emitEvent:function(o,a){this.s.dt.iterator("table",function(t,e){s(t.nTable).triggerHandler(o+".dt",a)})},_openEditModal:function(){var t=this,e=this.s.dt,o=[];for(var a in e.context[0].aoColumns){var n=e.context[0].aoColumns[a];o[a]={title:n.sTitle,name:n.data?n.data:n.mData,type:n.type?n.type:"text",options:n.options?n.options:[],msg:n.errorMsg?n.errorMsg:"",hoverMsg:n.hoverMsg?n.hoverMsg:"",pattern:n.pattern?n.pattern:".*",special:n.special?n.special:"",unique:!!n.unique&&n.unique,uniqueMsg:n.uniqueMsg?n.uniqueMsg:"",maxLength:!!n.maxLength&&n.maxLength,multiple:!!n.multiple&&n.multiple,select2:!!n.select2&&n.select2}}var l=e.rows({selected:!0}),i="";for(var d in i+="<form name='altEditor-form' role='form'>",o)if(0<=o[d].type.indexOf("hidden"))i+="<input type='hidden' id='"+o[d].name+"' value='"+l.data()[0][o[d].name]+"'></input>";else{if(i+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'>",i+="<div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'>",i+="<label for='"+o[d].title+"'>"+o[d].title+":</label></div>",i+="<div class='col-sm-8 col-md-8 col-lg-8'>",0<=o[d].type.indexOf("text")&&(i+="<input type='"+t._quoteattr(o[d].type)+"' id='"+t._quoteattr(o[d].name)+"'  pattern='"+t._quoteattr(o[d].pattern)+"'  title='"+t._quoteattr(o[d].hoverMsg)+"' name='"+t._quoteattr(o[d].title)+"' placeholder='"+t._quoteattr(o[d].title)+"' data-special='"+t._quoteattr(o[d].special)+"' data-errorMsg='"+t._quoteattr(o[d].msg)+"' data-uniqueMsg='"+t._quoteattr(o[d].uniqueMsg)+"' data-unique='"+o[d].unique+"'"+(0==o[d].maxLength?"":" maxlength='"+o[d].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value='"+t._quoteattr(l.data()[0][o[d].name])+"'>",i+="<label id='"+o[d].name+"label' class='errorLabel'></label>"),0<=o[d].type.indexOf("readonly")&&(i+="<input type='text' readonly  id='"+o[d].name+"' name='"+o[d].title+"' placeholder='"+o[d].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value='"+l.data()[0][o[d].name]+"'>"),0<=o[d].type.indexOf("select")){var r="";for(a=0;a<o[d].options.length;a++)0<=l.data()[0][o[d].name].indexOf(o[d].options[a])?r+="<option value='"+o[d].options[a]+"'selected>"+o[d].options[a]+"</option>":r+="<option value='"+o[d].options[a]+"'>"+o[d].options[a]+"</option>";i+="<select class='form-control"+(o[d].select2?" select2":"")+"' id='"+o[d].name+"' name='"+o[d].title+"' "+(o[d].multiple?"multiple":"")+">"+r+"</select>"}i+="</div><div style='clear:both;'></div></div>"}for(var d in i+="</form>",s("#altEditor-modal").on("show.bs.modal",function(){s("#altEditor-modal").find(".modal-title").html("Edit Record"),s("#altEditor-modal").find(".modal-body").html(i),s("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" data-content="remove" class="btn btn-primary" id="editRowBtn">Edit</button>')}),s("#altEditor-modal").modal("show"),s("#altEditor-modal input[0]").focus(),o)o[d].select2&&s("#altEditor-modal").find("select#"+o[d].name).select2(o[d].select2)},_editRowData:function(){var l=this,t=this.s.dt,e={};t.rows({selected:!0});s('form[name="altEditor-form"] *').filter(":input").each(function(t){e[s(this).attr("id")]=s(this).val()}),l.onEditRow(l,e,function(t,e,o,a,n){l._editRowCallback(t,e,o,a,n)},function(t){l._errorCallback(t)})},_openDeleteModal:function(){var t=this,e=this.s.dt,o=[];for(var a in e.context[0].aoColumns)o.push({title:e.context[0].aoColumns[a].sTitle,type:e.context[0].aoColumns[a].type?e.context[0].aoColumns[a].type:"text",name:e.context[0].aoColumns[a].data?e.context[0].aoColumns[a].data:e.context[0].aoColumns[a].mData});var n=e.rows({selected:!0}),l="";for(var i in l+="<form name='altEditor-form' role='form'>",o)0<=o[i].type.indexOf("hidden")?l+="<input type='hidden' id='"+o[i].title+"' value='"+n.data()[0][o[i].name]+"'></input>":l+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><label for='"+t._quoteattr(o[i].title)+"'>"+o[i].title+":  </label> <input  type='hidden'  id='"+t._quoteattr(o[i].title)+"' name='"+t._quoteattr(o[i].title)+"' placeholder='"+t._quoteattr(o[i].title)+"' style='overflow:hidden'  class='form-control' value='"+t._quoteattr(n.data()[0][o[i].name])+"' >"+n.data()[0][o[i].name]+"</input></div>";l+="</form>",s("#altEditor-modal").on("show.bs.modal",function(){s("#altEditor-modal").find(".modal-title").html("Delete Record"),s("#altEditor-modal").find(".modal-body").html(l),s("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button"  data-content="remove" class="btn btn-danger" id="deleteRowBtn">Delete</button>')}),s("#altEditor-modal").modal("show"),s("#altEditor-modal input[0]").focus()},_deleteRow:function(){for(var e=this,t=this.s.dt,o={},a=t.rows({selected:!0}),n=0;n<t.context[0].aoColumns.length;n++){var l=t.context[0].aoColumns[n].data?t.context[0].aoColumns[n].data:t.context[0].aoColumns[n].mData?t.context[0].aoColumns[n].mData:t.context[0].aoColumns[n].idx;o[l]=a.data()[0][l]}e.onDeleteRow(e,o,function(t){e._deleteRowCallback(t)},function(t){e._errorCallback(t)})},_openAddModal:function(){var t=this,e=this.s.dt,o=[];for(var a in e.context[0].aoColumns){var n=e.context[0].aoColumns[a];o[a]={title:n.sTitle,name:n.data?n.data:n.mData,type:n.type?n.type:"text",options:n.options?n.options:[],msg:n.errorMsg?n.errorMsg:"",hoverMsg:n.hoverMsg?n.hoverMsg:"",pattern:n.pattern?n.pattern:".*",special:n.special?n.special:"",unique:!!n.unique&&n.unique,uniqueMsg:n.uniqueMsg?n.uniqueMsg:"",maxLength:!!n.maxLength&&n.maxLength,multiple:!!n.multiple&&n.multiple,select2:!!n.select2&&n.select2}}var l="";for(var i in l+="<form name='altEditor-form' role='form'>",o)if(0<=o[i].type.indexOf("hidden"));else{if(l+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'><label for='"+o[i].title+"'>"+o[i].title+":</label></div><div class='col-sm-8 col-md-8 col-lg-8'>",0<=o[i].type.indexOf("text")&&(l+="<input type='"+t._quoteattr(o[i].type)+"' id='"+t._quoteattr(o[i].name)+"'  pattern='"+t._quoteattr(o[i].pattern)+"'  title='"+t._quoteattr(o[i].hoverMsg)+"' name='"+t._quoteattr(o[i].title)+"' placeholder='"+t._quoteattr(o[i].title)+"' data-special='"+o[i].special+"' data-errorMsg='"+t._quoteattr(o[i].msg)+"' data-uniqueMsg='"+t._quoteattr(o[i].uniqueMsg)+"' data-unique='"+o[i].unique+"'"+(0==o[i].maxLength?"":" maxlength='"+o[i].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value=''>",l+="<label id='"+t._quoteattr(o[i].name)+"label' class='errorLabel'></label>"),0<=o[i].type.indexOf("readonly")&&(l+="<input type='text' readonly  id='"+t._quoteattr(o[i].name)+"' name='"+t._quoteattr(o[i].title)+"' placeholder='"+t._quoteattr(o[i].title)+"' style='overflow:hidden'  class='form-control  form-control-sm' value=''>"),0<=o[i].type.indexOf("select")){var d="";for(a=0;a<o[i].options.length;a++)d+="<option value='"+t._quoteattr(o[i].options[a])+"'>"+o[i].options[a]+"</option>";l+="<select class='form-control"+(o[i].select2?" select2":"")+"' id='"+t._quoteattr(o[i].name)+"' name='"+t._quoteattr(o[i].title)+"' "+(o[i].multiple?"multiple":"")+">"+d+"</select>"}l+="</div><div style='clear:both;'></div></div>"}for(var i in l+="</form>",s("#altEditor-modal").on("show.bs.modal",function(){s("#altEditor-modal").find(".modal-title").html("Add Record"),s("#altEditor-modal").find(".modal-body").html(l),s("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button"  data-content="remove" class="btn btn-primary" id="addRowBtn">Add</button>')}),s("#altEditor-modal").modal("show"),s("#altEditor-modal input[0]").focus(),o)o[i].select2&&s("#altEditor-modal").find("select#"+o[i].name).select2(o[i].select2)},_addRowData:function(){var e=this,o=(this.s.dt,{});s('form[name="altEditor-form"] *').filter(":input").each(function(t){o[s(this).attr("id")]=s(this).val()}),e.onAddRow(e,o,function(t){e._addRowCallback(t)},function(t){e._errorCallback(t)})},_deleteRowCallback:function(t,e,o){s("#altEditor-modal .modal-body .alert").remove();s("#altEditor-modal .modal-body").append('<div class="alert alert-success" role="alert"><strong>Success!</strong></div>'),this.s.dt.row({selected:!0}).remove(),this.s.dt.draw(),s("div#altEditor-modal").find("button#addRowBtn").prop("disabled",!0),s("div#altEditor-modal").find("button#editRowBtn").prop("disabled",!0),s("div#altEditor-modal").find("button#deleteRowBtn").prop("disabled",!0)},_addRowCallback:function(t,e,o){var a=JSON.parse(t);s("#altEditor-modal .modal-body .alert").remove();s("#altEditor-modal .modal-body").append('<div class="alert alert-success" role="alert"><strong>Success!</strong></div>'),this.s.dt.row.add(a).draw(!1),s("div#altEditor-modal").find("button#addRowBtn").prop("disabled",!0),s("div#altEditor-modal").find("button#editRowBtn").prop("disabled",!0),s("div#altEditor-modal").find("button#deleteRowBtn").prop("disabled",!0)},_editRowCallback:function(t,e,o){var a=JSON.parse(t);s("#altEditor-modal .modal-body .alert").remove();s("#altEditor-modal .modal-body").append('<div class="alert alert-success" role="alert"><strong>Success!</strong></div>'),this.s.dt.row({selected:!0}).data(a),this.s.dt.draw(),s("div#altEditor-modal").find("button#addRowBtn").prop("disabled",!0),s("div#altEditor-modal").find("button#editRowBtn").prop("disabled",!0),s("div#altEditor-modal").find("button#deleteRowBtn").prop("disabled",!0)},_errorCallback:function(t,e,o){var a=resp;s("#altEditor-modal .modal-body .alert").remove();var n="There was an unknown error!";if(a.responseJSON&&a.responseJSON.errors)for(var l in n="",a.responseJSON.errors)n+=a.responseJSON.errors[l][0];var i='<div class="alert alert-danger" role="alert"><strong>Error!</strong> '+(null==a.status?"":"Response code: "+a.status)+" "+n+"</div>";s("#altEditor-modal .modal-body").append(i)},onAddRow:function(t,e,o,a){console.log("Missing AJAX configuration for INSERT"),o(e)},onEditRow:function(t,e,o,a){console.log("Missing AJAX configuration for UPDATE"),o(e)},onDeleteRow:function(t,e,o,a){console.log("Missing AJAX configuration for DELETE"),o(e)},_inputValidation:function(){var l=this.s.dt,t=!1,i=0;return s('form[name="altEditor-form"] *').filter(":text").each(function(t){var e="#"+s(this).attr("id")+"label";if(s(e).hide(),s(e).empty(),s(this).val().match(s(this).attr("pattern"))){if("true"==s(this).attr("data-unique")){var o=l.column("th:contains('"+s(this).attr("name")+"')").data(),a=null;for(var n in null!=l.row({selected:!0}).index()&&(a=l.cell(l.row({selected:!0}).index(),l.column("th:contains('"+s(this).attr("name")+"')").index()).data()),o)s(this).val()==o[n]&&o[n]!=a&&(s(e).html(s(this).attr("data-uniqueMsg")),s(e).show(),i++)}}else s(e).html(s(this).attr("data-errorMsg")),s(e).show(),i++}),0==i&&(t=!0),t},_quoteattr:function(t,e){return e=e?"&#13;":"\n",(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,e).replace(/[\r\n]/g,e)}}),d.version="2.0",d.defaults={alwaysAsk:!1,focus:null,columns:"",update:null,editor:null},d.classes={btn:"btn"},s(o).on("preInit.dt.altEditor",function(t,e,o){if("dt"===t.namespace){var a=e.oInit.altEditor,n=i.defaults.altEditor;if(a||n){var l=s.extend({},a,n);!1!==a&&new d(e,l)}}}),i.altEditor=d});